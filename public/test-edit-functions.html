<!DOCTYPE html>
<html>
<head>
    <title>Test Edit Functions</title>
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
</head>
<body class="p-8">
    <h1 class="text-2xl font-bold mb-4">Edit Functions Test</h1>
    
    <div class="mb-4 p-4 border rounded bg-gray-50">
        <h2 class="font-bold mb-2">Function Availability:</h2>
        <div id="status" class="font-mono text-sm"></div>
    </div>
    
    <div class="mb-4">
        <h2 class="font-bold mb-2">Ideas & Issues:</h2>
        <div id="ideasList"></div>
    </div>
    
    <script>
        // Setup globals
        window.ideas = {
            items: [
                {
                    id: 'test-1',
                    type: 'bug',
                    title: 'Test Bug - CLICK ME TO EDIT',
                    description: 'If clicking works, this should become editable',
                    priority: 'high',
                    status: 'new'
                }
            ],
            sprints: {}
        };
        window.activeProject = 'test';
        window.editingItemId = null;
    </script>
    
    <script src="session-management.js" defer></script>
    <script src="dashboard-improvements.js" defer></script>
    
    <script>
        window.addEventListener('load', () => {
            // Check functions
            const functions = [
                'renderIdeasTab',
                'startEdit',
                'cancelEdit',
                'saveItemChanges'
            ];
            
            const status = document.getElementById('status');
            status.innerHTML = functions.map(f => {
                const exists = typeof window[f] === 'function';
                return `<div class="${exists ? 'text-green-600' : 'text-red-600'}">
                    ${exists ? '✓' : '✗'} ${f}: ${typeof window[f]}
                </div>`;
            }).join('');
            
            // Try to render ideas
            if (typeof window.renderIdeasTab === 'function') {
                console.log('Calling renderIdeasTab...');
                window.renderIdeasTab();
                
                // Check if onclick handler was added
                const html = document.getElementById('ideasList').innerHTML;
                if (html.includes('onclick="startEdit')) {
                    status.innerHTML += '<div class="text-green-600 font-bold mt-2">✓ Click handlers added!</div>';
                } else if (html.includes('onclick')) {
                    status.innerHTML += '<div class="text-orange-600 mt-2">⚠ Has onclick but not startEdit</div>';
                } else {
                    status.innerHTML += '<div class="text-red-600 font-bold mt-2">✗ No click handlers!</div>';
                }
            } else {
                document.getElementById('ideasList').innerHTML = 
                    '<p class="text-red-500">renderIdeasTab not available!</p>';
            }
        });
    </script>
</body>
</html>