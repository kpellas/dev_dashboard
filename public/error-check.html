<!DOCTYPE html>
<html>
<head>
    <title>Error Check</title>
</head>
<body>
    <h1>JavaScript Error Check</h1>
    <pre id="log"></pre>
    
    <script>
        const log = document.getElementById('log');
        
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            log.textContent += `ERROR: ${msg}\nFile: ${url}\nLine: ${lineNo}\n\n`;
            return false;
        };
        
        // Minimal globals
        window.sessions = [];
        window.activeProject = null;
        window.projects = {};
        window.worktrees = [];
        window.ideas = { items: [] };
        window.editingItemId = null;
        window.editingSprintName = null;
        window.editingWorktreeName = null;
        window.editingSessionId = null;
        
        log.textContent += 'Loading session-management.js...\n';
    </script>
    
    <script src="session-management.js"></script>
    
    <script>
        log.textContent += 'session-management.js loaded\n';
        log.textContent += 'renderEnhancedSessionCard: ' + typeof window.renderEnhancedSessionCard + '\n\n';
        
        log.textContent += 'Loading dashboard-improvements.js...\n';
    </script>
    
    <script src="dashboard-improvements.js"></script>
    
    <script>
        log.textContent += 'dashboard-improvements.js loaded\n';
        log.textContent += 'renderIdeasTab: ' + typeof window.renderIdeasTab + '\n';
        log.textContent += 'startEdit: ' + typeof window.startEdit + '\n';
        
        if (typeof window.renderIdeasTab === 'function') {
            window.ideas.items = [{
                id: '1',
                type: 'bug',
                title: 'Test',
                priority: 'high',
                status: 'new'
            }];
            
            // Create div for rendering
            const div = document.createElement('div');
            div.id = 'ideasList';
            document.body.appendChild(div);
            
            try {
                window.renderIdeasTab();
                const html = div.innerHTML;
                if (html.includes('onclick="startEdit')) {
                    log.textContent += '\n✓ SUCCESS: Edit handlers are present!';
                } else {
                    log.textContent += '\n✗ FAIL: No edit handlers found';
                    log.textContent += '\nHTML snippet: ' + html.substring(0, 200);
                }
            } catch (e) {
                log.textContent += '\nError rendering: ' + e.message;
            }
        }
    </script>
</body>
</html>